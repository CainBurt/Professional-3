<section class="team ">
    <div class="search-section container">
        <div class="title inner-container">
            <h1>{{__('<span>Welcome </span>to<br/>our team', 'crowd')}}</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        </div>
        <div class="search-form">
        {# TODO: SEARCH FORM HERE #}
        <form class="filter-form" action="">
            <div class="location-container">
                <label for="location">{{__('Location', 'crowd')}}</label><br>
                {# {% set selectedIdItems = pageTemplate.pageHeader.pageValue.comp1X|split('|') %}
                {{ selectedIdItems | json_encode(constant('JSON_PRETTY_PRINT'))}} #}
                <select name="location" id="location">
                    {% set location_field = function('get_field_object', 'field_63bd699227799' )%}
                    {% set locations = location_field['choices'] %}
                    <option value="All">{{__('All', 'crowd')}}</option>
                    {% for location in locations %}
                        <option value="{{location}}" {{ request.get.location == location ? 'selected' : '' }}>{{location}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="department-container">
                <label for="department">{{__('Department', 'crowd')}}</label><br>
                <select name="department" id="department">
                    <option value="All">{{__('All', 'crowd')}}</option>
                    {% for teams in fields.teams %}
                        <option value="{{teams.team_name}}" {{ request.get.department == teams.team_name ? 'selected' : '' }}>{{teams.team_name}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="skill-container">
                <label for="skill">{{__('Expert In', 'crowd')}}</label><br>
                <input type="text" id="skill" name="skill" placeholder="All">
            </div>
            <button type="submit">{{__('Filter', 'crowd')}}</button>
        </form>
        <form class="search-form" action="">
            <label for="search">{{__('Staff Search', 'crowd')}}</label><br>
            <input type="text" id="search" name="search" placeholder="Name goes here">
            <button type="submit"><i class="fa fa-search"></i></button>
        </form>
        </div>
    </div>
    {# <h1>LOCATION:{{ request.get.location }}</h1>
    <h1>DEPARTMENT:{{ request.get.department }}</h1>
    <h1>SEARCH:{{ request.get.search }}</h1> #}
    <div class="team-section">
        {% for teams in fields.teams %}
            {% if (request.get.department == teams.team_name) or (request.get.department == 'All') or (request.get.department == '')%}
                {% if (teams.team_members)  %}
                <div class="team-row">
                    <p class="team-name">{{teams.team_name}} {{hideTrack}}</p>
                    <div class="members-list glide">
                        <div class="glide__track" data-glide-el="track">
                            <ul class="glide__slides">
                                {% for member in teams.team_members %}
                                    {% if (request.get.location == member.location) or (request.get.location == 'All') or (request.get.location or request.get.search == '') or (request.get.search|lower in member.nickname|lower) %}
                                    <li class="glide__slide team-member">
                                        <img src="{{function('wp_get_attachment_image_url', member.image, 'full')}}" alt="">
                                        <p class="name">{{member.nickname}}</p>
                                        <p class="job">{{member.job_title}} <span style="color: var(--orange)">&#x2022; </span>{{member.location}}</p>
                                        <div class="icons">
                                            <a href="mailto:{{ member.user_email }}" target="_BLANK">
                                                <span id="email_btn" class="fa-stack fa-lg" style="vertical-align: top;">
                                                    <i id="email_icon" class="fa-solid fa-circle fa-stack-2x "></i>
                                                    <i class="fa-solid fa-envelope fa-stack-1x tooltip"></i>
                                                </span>
                                            </a>
                                            <a href="{{ member.linkedin }}" target="_BLANK">
                                                <span id="linkedin_btn" class="fa-stack fa-lg" style="vertical-align: top;">
                                                    <i class="fa-solid fa-circle fa-stack-2x "></i>
                                                    <i class="fa-brands fa-linkedin-in fa-stack-1x tooltip"></i>
                                                </span>
                                            </a>
                                            <span id="skills_btn" class="fa-stack fa-lg" style="vertical-align: top;" onclick="clickSkills(this, {{member.id}})">
                                                <i class="fa-solid fa-circle fa-stack-2x "></i>
                                                <i class="fa-solid fa-brain fa-stack-1x tooltip"></i>
                                            </span>
                                        </div>
                                        
                                        <div id="skills_{{member.id}}" class="skills">
                                            {{ member.skills }}
                                        </div>
                                        
                                        
                                    </li>
                                    {% else %}
                                    {% endif %}
                                {% endfor %} 
                            </ul>
                        </div>
                    </div>
                </div>
                {% endif %}
            {% endif %}
        {% endfor %}
    </div>

</section>

<script>

function clickSkills(element, userId){
    // var skills = document.getElementById('skills_' + userId.toString());
    var skills = document.querySelectorAll('#skills_' + userId.toString());

    if(!element.classList.contains('icon-clicked')){
        element.classList.add("icon-clicked")
        Array.from(skills)
            .forEach(function(val) {
                val.style.display = 'block';
        });
        // skills.style.display = 'block';
    }else{
        element.classList.remove("icon-clicked")
        Array.from(skills)
            .forEach(function(val) {
                val.style.display = 'none';
        });
        
        // skills.style.display = 'none';
    }
        
    
}
</script>